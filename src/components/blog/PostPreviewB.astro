---
import type { CollectionEntry } from "astro:content";
import type { HTMLTag, Polymorphic } from "astro/types";
import FormattedDate from "@/components/FormattedDate";
import { Icon } from "astro-icon";
import { getLangFromUrl, getSlugFromCollectionEntry } from "@/utils";

interface Props {
    post: CollectionEntry<"blog" | "project">;
    withDesc?: boolean;
}

const { post, withDesc = false } = Astro.props;
const lang = getLangFromUrl(Astro.url);
const slug = getSlugFromCollectionEntry(post);
const urlBasePath = post.collection === "project" ? "projects" : post.collection;
const postDate = post.data.pubDate; // pubDate is required in both blog and project collections
const pinned: boolean = !!post.data.order;
---

<article class="bg-gray-50 dark:bg-gray-800 p-6 rounded-lg">
    <h3 class="text-xl font-semibold mb-2">
        <a href={`/${lang}/${post.collection}/${post.slug}/`} class="hover:text-blue-600 dark:hover:text-blue-400">
            {post.data.title}
        </a>
    </h3>
    {withDesc && post.data.description && (
        <p class="text-gray-600 dark:text-gray-300 mb-4">
            {post.data.description}
        </p>
    )}
    <time datetime={postDate.toISOString()} class="text-sm text-gray-500 dark:text-gray-400">
        {postDate.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        })}
    </time>
</article>
